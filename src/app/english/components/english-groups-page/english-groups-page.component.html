<mat-form-field *ngIf="periods" class="w-100">
  <mat-chip-list #chipList aria-label="Period selection">
    <mat-chip *ngFor="let p of usedPeriods" selectable="true" removable="true" (removed)="removePeriod(p)">
      {{p.periodName}}-{{p.year}}
      <mat-icon matChipRemove>cancel</mat-icon>
    </mat-chip>
    <input placeholder="Filtrar por perÃ­odo..." #periodInput [formControl]="periodCtrl" [matAutocomplete]="auto"
      [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes" matChipInputAddOnBlur="true"
      (matChipInputTokenEnd)="addPeriod($event)" (ngModelChange)="filterPeriod($event)" matInput>
  </mat-chip-list>
  <mat-autocomplete #auto="matAutocomplete">
    <mat-option *ngFor="let period of periods" [value]="period" (click)="slectedPeriod(period)">
      {{period.periodName}}-{{period.year}}
    </mat-option>
  </mat-autocomplete>
</mat-form-field>

<div class="row">

  <div *ngFor="let group of showGroups" class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
    <mat-card class="mat-card-course mb-3 text-white" style="background-color:#183969;">
      <mat-card-header>
        <mat-card-title><strong>{{group.name}}</strong></mat-card-title>
        <mat-card-subtitle class="text-white">{{ getStatusGroupName(group.status) }}</mat-card-subtitle>
      </mat-card-header>

      <button mat-icon-button class="button-options-group" [matMenuTriggerFor]="menu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button (click)="openDilogViewScheduleGroup(group.schedule)" mat-menu-item>
          <mat-icon>watch_later</mat-icon>
          <span>Ver Horario</span>
        </button>
        <button (click)="openDialogshowGroupStudents(group)" mat-menu-item>
          <mat-icon>view_list</mat-icon>
          <span>Ver Alumnos Inscritos</span>
        </button>
      </mat-menu>

      <mat-card-content class="pl-2 pr-2 m-0">
      </mat-card-content>
      <mat-card-actions>
        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
          style="background-color: #C7C7C7;">
          <mat-expansion-panel-header>
            <mat-panel-title></mat-panel-title>
            <mat-panel-description>
              Detalles del grupo
            </mat-panel-description>
          </mat-expansion-panel-header>
          <p>Curso: <strong>{{group.course.name}}</strong></p>
          <p>Bloque: <strong>{{group.level}}</strong></p>
          <p>Estudiantes: <strong>{{group.reqActCount}}</strong></p>
        </mat-expansion-panel>
      </mat-card-actions>
    </mat-card>
  </div>

</div>

<ng-template #viewScheduleGroup>
  <h1 mat-dialog-title>Horario</h1>
  <div mat-dialog-content>
    <table class="table table-bordered table-hover mt-2">
      <thead>
        <tr>
          <th class="text-center" *ngFor="let day of weekdays" scope="col">
            {{dayschedule[day]}}</th>
        </tr>
      </thead>
      <tbody>

        <tr>
          <td class="text-center" *ngFor="let day of weekdays; let j = index;">
            <ng-container *ngFor="let hourForDay of scheduleGroupSelected;">
              <ng-container *ngIf="hourForDay.day==day">
                {{getHour(hourForDay.startHour)}} - {{getHour(hourForDay.endDate)}}
              </ng-container>
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div mat-dialog-actions>
    <button mat-button cdkFocusInitial matDialogClose class="button-blue">Salir</button>
  </div>
</ng-template>