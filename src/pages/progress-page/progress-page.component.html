<div class="row mx-3">
    <mat-card class="col-12">
        <mat-card-header>

            <!-- <div class="col-8">
                    <mat-form-field>
                        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtro">
                    </mat-form-field>
                </div>
                <div class="col-4">
                    <div class="btn-group" role="group" aria-label="Basic example">
                    </div>
                    <mat-button-toggle-group name="fontStyle" aria-label="Font Style">
                        <mat-button-toggle value="bold">Bold</mat-button-toggle>
                        <mat-button-toggle value="italic">Italic</mat-button-toggle>
                        <mat-button-toggle value="underline">Underline</mat-button-toggle>
                    </mat-button-toggle-group>
                </div> -->


            <!-- <button mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item>Pendiente</button>
                <button mat-menu-item>Aceptado</button>
                <button mat-menu-item>Rechazado</button>
            </mat-menu> -->
        </mat-card-header>
        <mat-card-content>
            <div class="col-12">
                <div class="form-row">
                    <div class="col-8">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend mr-1">
                                <button mat-stroked-button> <i class="fa fa-refresh mr-1"></i>Actualizar</button>
                            </div>
                            <input type="text" (keyup)="applyFilter($event.target.value)" class="form-control"
                                placeholder="Buscar">
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="form-group">
                            <div class="btn-group" role="group" aria-label="Basic example">
                                <button mat-stroked-button class="mr-1"> <i
                                        class="fa fa-refresh mr-1"></i>Actualizar</button>
                                <button mat-stroked-button class="mr-1"> <i
                                        class="fa fa-refresh mr-1"></i>Actualizar</button>
                                <button mat-stroked-button class="mr-1"> <i
                                        class="fa fa-refresh mr-1"></i>Actualizar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <table mat-table [dataSource]="dataSource" matSort>
                <!-- ID Column -->
                <ng-container matColumnDef="_id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
                    <td mat-cell *matCellDef="let row"> {{row._id}} </td>
                </ng-container>

                <!-- Progress Column -->
                <ng-container matColumnDef="controlNumber">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:10%"> NÃºmero
                        Control
                    </th>
                    <td mat-cell *matCellDef="let row" style="width:10%"> {{row.controlNumber}} </td>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="fullName">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:20%"> Nombre
                    </th>
                    <td mat-cell *matCellDef="let row" style="width:20%"> {{row.fullName}} </td>
                </ng-container>

                <!-- Color Column -->
                <ng-container matColumnDef="career">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:35%"> Carrera
                    </th>
                    <td mat-cell *matCellDef="let row" style="width:35%"> {{row.career}} </td>
                </ng-container>

                <ng-container matColumnDef="phase">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:10%"> Fase </th>
                    <td mat-cell *matCellDef="let row" style="width:10%">
                        <div [ngSwitch]="row.phase">
                            <span *ngSwitchCase="'Capturado'"
                                class="badge badge-pill badge-captured">{{row.phase}}</span>
                            <span *ngSwitchCase="'Enviado'" class="badge badge-pill badge-sent">{{row.phase}}</span>
                            <span *ngSwitchCase="'Verificado'"
                                class="badge badge-pill badge-verified">{{row.phase}}</span>
                            <span *ngSwitchCase="'Registrado'"
                                class="badge badge-pill badge-registered">{{row.phase}}</span>
                            <span *ngSwitchCase="'Liberado'"
                                class="badge badge-pill badge-released">{{row.phase}}</span>
                            <span *ngSwitchCase="'Entregado'"
                                class="badge badge-pill badge-delivered">{{row.phase}}</span>
                            <span *ngSwitchCase="'Validado'"
                                class="badge badge-pill badge-validated">{{row.phase}}</span>
                            <span *ngSwitchCase="'Asignado'"
                                class="badge badge-pill badge-assigned">{{row.phase}}</span>
                            <span *ngSwitchCase="'Realizado'"
                                class="badge badge-pill badge-realized">{{row.phase}}</span>
                            <span *ngSwitchCase="'Generado'"
                                class="badge badge-pill badge-generated">{{row.phase}}</span>
                            <span *ngSwitchDefault class="badge badge-pill badge-gray">{{row.phase}}</span>
                        </div>
                    </td>
                </ng-container>

                <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:10%"> Estatus
                    </th>
                    <td mat-cell *matCellDef="let row" style="width:10%">
                        {{row.status}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="applicationDateLocal">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:10%"> Fecha </th>
                    <td mat-cell *matCellDef="let row" style="width:10%"> {{row.applicationDateLocal}}
                    </td>
                </ng-container>

                <ng-container matColumnDef="action">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header style="width:5%"></th>
                    <td mat-cell *matCellDef="let row" style="width:5%">
                        <button mat-icon-button [matMenuTriggerFor]="actions">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #actions="matMenu">
                            <!-- <button mat-menu-item (click)="seeRequestPDF(row._id)">
                                <mat-icon>visibility</mat-icon>
                                Ver solicitud
                            </button> -->
                            <button mat-menu-item (click)="viewHistory(row._id)">
                                <mat-icon>assignment</mat-icon>
                                Historial de Avance
                            </button>
                            <button mat-menu-item (click)="seeRecord(row._id)">
                                <mat-icon>folder_shared</mat-icon>
                                Expediente
                            </button>
                            <div [ngSwitch]="row.phase">
                                <button *ngSwitchCase="'Enviado'" mat-menu-item (click)="checkRequest(row._id)">
                                    <mat-icon>assignment_turned_in</mat-icon>
                                    Revisar
                                </button>
                                <button *ngSwitchCase="'Verificado'" mat-menu-item (click)="Verified(row._id)">
                                    <mat-icon>thumb_up_alt</mat-icon>
                                    Verificar
                                </button>
                                <button *ngSwitchCase="'Registrado'" mat-menu-item (click)="releasedRequest(row._id)">
                                    <mat-icon>lock_open</mat-icon>
                                    Liberacion
                                </button>
                                <button *ngSwitchCase="'Liberado'" mat-menu-item (click)="checkReleased(row._id)">
                                    <mat-icon>thumbs_up_down</mat-icon>
                                    Validar Liberacion
                                </button>
                                <div *ngSwitchCase="'Entregado'">
                                    <button *ngIf="row.status!=='Ninguno'" mat-menu-item (click)="Review(row._id)">
                                        <mat-icon>search</mat-icon>
                                        Revisar
                                    </button>
                                </div>
                                <button *ngSwitchCase="'Validado'" mat-menu-item (click)="openRequestForm(row._id)">
                                    <mat-icon>assignment_turned_in</mat-icon>
                                    Revisar3
                                </button>
                                <button *ngSwitchCase="'Asignado'" mat-menu-item (click)="openRequestForm(row._id)">
                                    <mat-icon>assignment_turned_in</mat-icon>
                                    Revisar
                                </button>
                                <button *ngSwitchCase="'Realizado'" mat-menu-item (click)="openRequestForm(row._id)">
                                    <mat-icon>assignment_turned_in</mat-icon>
                                    Revisar
                                </button>
                                <button *ngSwitchCase="'Generado'" mat-menu-item (click)="openRequestForm(row._id)">
                                    <mat-icon>assignment_turned_in</mat-icon>
                                    Revisar
                                </button>
                                <!-- <button *ngSwitchDefault mat-menu-item (click)="openRequestForm(row._id)">
                                    <mat-icon>assignment_turned_in</mat-icon>
                                    Revisar
                                </button> -->
                            </div>
                        </mat-menu>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
        </mat-card-content>
    </mat-card>
</div>
<!-- <mat-card>
    <mat-card-header>
        <div class="row">
            <div class="btn-group">
                <button type="button" class="btn btn-outline-dark">Dark</button>
                <button type="button" class="btn btn-outline-dark">Dark</button>
                <button type="button" class="btn btn-outline-dark">Dark</button>
                <button type="button" class="btn btn-outline-dark">Dark</button>
            </div>
        </div>
        <div class="row">
            <mat-form-field appearance="outline" class="px-3">
                <mat-label>Buscar</mat-label>
                <input matInput placeholder="Buscar" type="number">
                <mat-icon matPrefix>search</mat-icon>
                <mat-icon matSuffix style="color: #5c6bc0">label_important</mat-icon>
            </mat-form-field>
        </div>
    </mat-card-header>

    <mat-card-content>
       
    </mat-card-content>
</mat-card> -->