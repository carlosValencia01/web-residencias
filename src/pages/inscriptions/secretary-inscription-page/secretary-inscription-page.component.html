<div class="content-general">
  <div class="card card-shadow">
    <div class="card-header text-white bg-secondary">
      <strong>Listado de Alumnos</strong>
    </div>
    <div class="card-body">
      <div style="overflow-x:auto; padding-top: 20px;">
        <div class="row">
          <div class="col-2" *ngIf="rolName == 'Administrador' || rolName == 'Secretaria'">
            <div class="form-group">
              <input [(ngModel)]="searchText" type="text" class="form-control" placeholder="Buscar Alumno..."
                (keyup)="eventFilterStatus(searchText)">
            </div>
          </div>
          <div class="col-4" *ngIf="rolName == 'Médico'">
            <div class="form-group">
              <input [(ngModel)]="searchText" type="text" class="form-control" placeholder="Buscar Alumno..."
                (keyup)="eventFilterStatus(searchText)">
            </div>
          </div>
          <div class="col-3">
            <div class="form-group">
              <select [(ngModel)]="searchCarreer" class="form-control" (change)="eventFilterStatus()">
                <option value=''>Todas las carreras</option>
                <option value='INGENIERÍA BIOQUÍMICA'>Ingeniería Bioquímica</option>
                <option value='INGENIERÍA EN GESTIÓN EMPRESARIAL'>Ingeniería en Gestión Empresarial</option>
                <option value='INGENIERÍA CIVIL'>Ingeniería Civil</option>
                <option value='ARQUITECTURA'>Arquitectura</option>
                <option value='INGENIERÍA QUÍMICA'>Ingeniería Química</option>
                <option value='INGENIERÍA MECATRÓNICA'>Ingeniería Mecatrónica</option>
                <option value='INGENIERÍA ELÉCTRICA'>Ingeniería Eléctrica</option>
                <option value='LICENCIATURA EN ADMINISTRACIÓN'>Licenciatura en Administración</option>
                <option value='INGENIERÍA EN TECNOLOGÍAS DE LA INFORMACIÓN Y COMUNICACIÓN'>Ingeniería en Tecnologías de
                  la Información y Comunicación</option>
                <option value='INGENIERÍA EN SISTEMAS COMPUTACIONALES'>Ingeniaría en Sistemas Computacionales</option>
                <option value='INGENIERÍA INDUSTRIAL'>Ingeniaría Industrial</option>
                <option value='MAESTRÍA EN CIENCIAS EN ALIMENTOS'>Maestría en Ciencias en Alimentos</option>
                <option value='DOCTORADO EN CIENCIAS EN ALIMENTOS'>Doctorado en Ciencias en Alimentos</option>
              </select>
            </div>
          </div>
          <div class="col-2" *ngIf="rolName == 'Administrador' || rolName == 'Secretaria'">
            <div class="form-group">
              <select class="form-control" (change)="eventFilterReport()">
                <option value=''>Periodo</option>
                <option value='AD2019'>Agosto-Diciembre 2019</option>
                <option value='EJ2020'>Enero-Junio 2020</option>
              </select>
            </div>
          </div>
          <div class="col-2" *ngIf="rolName == 'Administrador' || rolName == 'Secretaria'">
            <table class="table table-bordered">
              <tr>
                <td id="checkC">
                  <div class="custom-control custom-checkbox custom-control-inline" ngbTooltip="Captura"
                    tooltipClass="my-custom-class">
                    <input [(ngModel)]="searchEC" type="checkbox" class="custom-control-input" id="defaultInline2"
                      value="En Captura" (change)="eventFilterStatus()">
                    <label class="custom-control-label" for="defaultInline2">C</label>
                  </div>
                </td>
                <td id="checkE">
                  <div class="custom-control custom-checkbox custom-control-inline" ngbTooltip="Enviado"
                    tooltipClass="my-custom-class">
                    <input [(ngModel)]="searchE" type="checkbox" class="custom-control-input" id="defaultInline3"
                      value="Enviado" (change)="eventFilterStatus()">
                    <label class="custom-control-label" for="defaultInline3">E</label>
                  </div>
                </td>
                <td id="checkP">
                  <div class="custom-control custom-checkbox custom-control-inline" ngbTooltip="Proceso"
                    tooltipClass="my-custom-class">
                    <input [(ngModel)]="searchEP" type="checkbox" class="custom-control-input" id="defaultInline4"
                      value="En Proceso" (change)="eventFilterStatus()">
                    <label class="custom-control-label" for="defaultInline4">P</label>
                  </div>
                </td>
                <td id="checkV">
                  <div class="custom-control custom-checkbox custom-control-inline" ngbTooltip="Verificado"
                    tooltipClass="my-custom-class">
                    <input [(ngModel)]="searchV" type="checkbox" class="custom-control-input" id="defaultInline5"
                      value="Verificado" (change)="eventFilterStatus()">
                    <label class="custom-control-label" for="defaultInline5">V</label>
                  </div>
                </td>
                <td id="checkA">
                  <div class="custom-control custom-checkbox custom-control-inline" ngbTooltip="Aceptado"
                    tooltipClass="my-custom-class">
                    <input [(ngModel)]="searchA" type="checkbox" class="custom-control-input" id="defaultInline6"
                      value="Aceptado" (change)="eventFilterStatus()">
                    <label class="custom-control-label" for="defaultInline6">A</label>
                  </div>
                </td>
              </tr>
            </table>
          </div>
        </div>

        <table class="table table-striped table-bordered table-hover" id="my-table">
          <thead>
            <tr>
              <th>Número de Control</th>
              <th>Nombre del Alumno</th>
              <th>Carrera</th>
              <th *ngIf="rolName == 'Administrador' || rolName == 'Secretaria'">Estatus</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of listStudents | filter:{career:searchCarreer} | filter: {controlNumber:searchText,fullName:searchText} | paginate: {id:pag, itemsPerPage: pageSize, currentPage: page };">
              <td>{{item.controlNumber}}</td>
              <td>{{item.fullName}}</td>
              <td>{{item.career}}</td>
              <td *ngIf="item.inscriptionStatus == 'En Captura' && rolName == 'Administrador' || item.inscriptionStatus == 'En Captura' && rolName == 'Secretaria'" class="Captura">{{item.inscriptionStatus}}</td>
              <td *ngIf="item.inscriptionStatus == 'Enviado' && rolName == 'Administrador' || item.inscriptionStatus == 'Enviado' && rolName == 'Secretaria'" class="Enviado">{{item.inscriptionStatus}}</td>
              <td *ngIf="item.inscriptionStatus == 'En Proceso' && rolName == 'Administrador' || item.inscriptionStatus == 'En Proceso' && rolName == 'Secretaria'" class="Proceso">{{item.inscriptionStatus}}</td>
              <td *ngIf="item.inscriptionStatus == 'Verificado' && rolName == 'Administrador' || item.inscriptionStatus == 'Verificado' && rolName == 'Secretaria'" class="Verificado">{{item.inscriptionStatus}}</td>
              <td *ngIf="item.inscriptionStatus == 'Aceptado' && rolName == 'Administrador' || item.inscriptionStatus == 'Aceptado' && rolName == 'Secretaria'" class="Aceptado">{{item.inscriptionStatus}}</td>
              <td>
                <div class="div-actions">
            <tr>
              <td *ngIf="rolName == 'Administrador' || rolName == 'Secretaria'">
                <div class="div-img" ngbTooltip="Información General" tooltipClass="my-custom-class">
                  <img src="../../assets/icons/observations.svg" class="action" (click)="updateGI(item)">
                </div>
              </td>
              <td *ngIf="rolName == 'Administrador' || rolName == 'Secretaria'">
                <div class="div-img" ngbTooltip="Documentos a Dictaminar" tooltipClass="my-custom-class">
                  <img src="../../assets/icons/folder.svg" class="action" (click)="viewExpedient(item)">
                </div>
              </td>
              <td *ngIf="rolName == 'Médico' && item.documents != '' ">
                <div class="div-img" ngbTooltip="Consultar Análisis Clínicos" tooltipClass="my-custom-class">
                  <img src="../../assets/icons/folder.svg" class="action" (click)="viewAnalysis(item)">
                </div>
              </td>
            </tr>
      </div>
      </td>
      </tr>
      </tbody>
      <tfoot align="right" *ngIf="rolName == 'Administrador' || rolName == 'Secretaria'">
          <td colspan="5">
             <div class="div-actionsFoot">
                <tr>
                   <td>
                      <div class="div-img" ngbTooltip="Exportar a Excel" tooltipClass="my-custom-class">
                         <img src="../../assets/icons/excelExport.svg" class="action" (click)="excelExport()">
                      </div>
                   </td>
                   <td>
                      <div class="div-img" ngbTooltip="Generar Carátulas" tooltipClass="my-custom-class">
                         <img src="../../assets/icons/cover.svg" class="action" (click)="generateCovers()">
                      </div>
                   </td>
                   <td>
                      <div class="div-img" ngbTooltip="Generar Pestañas" tooltipClass="my-custom-class">
                         <img src="../../assets/icons/label.svg" class="action" (click)="generateLabels()">
                      </div>
                   </td>
                </tr>
             </div>
          </td>
       </tfoot>
      </table>
      <div class='div-pagination'>
        <pagination-controls [id]="pag" directionLinks="true" (pageChange)="pageChanged($event)" responsive="true"
          previousLabel="Anterior" nextLabel="Siguiente">
        </pagination-controls>
      </div>

      <!-- Tabla reporte alumnos Excel-->
      <table class="table table-striped table-bordered table-hover" id="tableReportExcel"
        data-cols-width="9,21,46,66,15">
        <thead>
          <tr>
            <th data-f-bold="true" data-f-sz="14" data-fill-color="112043" data-f-color="FFFFFF">No</th>
            <th data-f-bold="true" data-f-sz="14" data-fill-color="112043" data-f-color="FFFFFF">Número de Control</th>
            <th data-f-bold="true" data-f-sz="14" data-fill-color="112043" data-f-color="FFFFFF">Nombre del Alumno</th>
            <th data-f-bold="true" data-f-sz="14" data-fill-color="112043" data-f-color="FFFFFF">Carrera</th>
            <th data-f-bold="true" data-f-sz="14" data-fill-color="112043" data-f-color="FFFFFF">Estatus</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of listStudents | filter:{career:searchCarreer} | filter: {controlNumber:searchText,fullName:searchText}; let indice=index">
            <td data-f-sz="12">{{indice+1}}</td>
            <td data-f-sz="12">{{item.controlNumber}}</td>
            <td data-f-sz="12">{{item.fullName}}</td>
            <td data-f-sz="12">{{item.career}}</td>
            <td data-f-sz="12" *ngIf="item.inscriptionStatus == 'En Captura' " class="Captura">{{item.inscriptionStatus}}</td>
            <td data-f-sz="12" *ngIf="item.inscriptionStatus == 'Enviado' " class="Enviado">{{item.inscriptionStatus}}</td>
            <td data-f-sz="12" *ngIf="item.inscriptionStatus == 'En Proceso' " class="Proceso">{{item.inscriptionStatus}}</td>
            <td data-f-sz="12" *ngIf="item.inscriptionStatus == 'Verificado' " class="Verificado">{{item.inscriptionStatus}}</td>
            <td data-f-sz="12" *ngIf="item.inscriptionStatus == 'Aceptado' " class="Aceptado">{{item.inscriptionStatus}}</td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>
</div>
</div>
<div class="center">
  <app-loader [loading]="loading"></app-loader>
</div>