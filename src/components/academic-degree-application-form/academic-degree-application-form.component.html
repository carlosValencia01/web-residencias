<div class="card">
  <form [formGroup]="formRequest" (ngSubmit)="onSave()" enctype="multipart/form-data">
    <div class="card-body">
      <!-- <div *ngIf="operationMode===1">
        <p-messages [(value)]="msnObservations"></p-messages>
      </div> -->
      <div class="row">
        <div class="form-group col-sm-6 col-md-6">
          <label class="form-col-form-label" for="name">Nombre</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-user"></i></span>
            </div>
            <input type="text"
              [ngClass]="(!formRequest.get('name').valid && formRequest.get('name').touched)?'form-control is-invalid':'form-control'"
              id="name" formControlName="name" placeholder="Nombre" oninput="this.value = this.value.toUpperCase()">
            <div class="invalid-feedback" *ngIf="!formRequest.get('name').valid && formRequest.get('name').touched">
              <span *ngIf="formRequest.get('name').errors['required']">
                ¡Por favor ingrese un nombre!
              </span>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-6">
          <label class="form-col-form-label" for="lastname">Apellidos</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-user"></i></span>
            </div>
            <input type="text"
              [ngClass]="(!formRequest.get('lastname').valid && formRequest.get('lastname').touched)?'form-control is-invalid':'form-control'"
              id="lastname" formControlName="lastname" placeholder="Apellidos"
              oninput="this.value = this.value.toUpperCase()">
            <div class="invalid-feedback" *ngIf="!formRequest.get('lastname').valid && formRequest.get('lastname').touched">
              <span *ngIf="formRequest.get('lastname').errors['required']">
                ¡Por favor ingrese sus apellidos!
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-sm-6 col-md-6">
          <label class="form-col-form-label" for="telephone">Número Telefónico</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-phone"></i></span>
            </div>
            <input type="text"
              [ngClass]="(!formRequest.get('telephone').valid && formRequest.get('telephone').touched)?'form-control is-invalid':'form-control'"
              id="telephone" formControlName="telephone" placeholder="(311)-102-3456">
            <div class="invalid-feedback"
              *ngIf="!formRequest.get('telephone').valid && formRequest.get('telephone').touched">
              <span *ngIf="formRequest.get('telephone').errors['required']">
                Número telefónico obligatorio
              </span>
              <span *ngIf="formRequest.get('telephone').errors['pattern']">
                Número telefónico incorrecto
              </span>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-6">
          <label class="form-col-form-label" for="email">Correo electrónico</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-envelope"></i></span>
            </div>
            <input type="text"
              [ngClass]="(!formRequest.get('email').valid && formRequest.get('email').touched)?'form-control is-invalid':'form-control'"
              id="email" formControlName="email" placeholder="Correo electrónico"
              oninput="this.value = this.value.toUpperCase()">
            <div class="invalid-feedback" *ngIf="!formRequest.get('email').valid && formRequest.get('email').touched">
              <span *ngIf="formRequest.get('email').errors['required']">
                Correo electrónico obligatorio
              </span>
              <span *ngIf="formRequest.get('email').errors['email']">
                Ingrese un correo válido
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-sm-12 col-md-12">
          <label class="form-col-form-label" for="projectName">Proyecto</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-folder"></i></span>
            </div>
            <input type="text"
              [ngClass]="(!formRequest.get('projectName').valid && formRequest.get('projectName').touched)?'form-control is-invalid':'form-control'"
              id="projectName" formControlName="projectName" placeholder="Nombre del proyecto"
              oninput="this.value = this.value.toUpperCase()">
            <div class="invalid-feedback" *ngIf="!formRequest.get('projectName').valid && formRequest.get('projectName').touched">
              <span *ngIf="formRequest.get('projectName').errors['required']">
                Nombre del proyecto obligatorio
              </span>
            </div>
          </div>
        </div>    
      </div>
      <div class="row">          
        <div class="col-sm-6 col-md-6" [ngSwitch]="operationMode">
          <div class="form-group" *ngSwitchCase="1">
            <label class="form-col-form-label" for="projectFile">Portada del Proyecto</label>
            <div *ngIf="isLoadImage" class="form-group form-actions d-flex justify-content-center">
              <img [src]="resource" style="width: 300px; height: 300px;">
            </div>
            <div class="input-group custom-file">
                <input #projectFile class="custom-file-input" type="file" accept=".pdf" formControlName="projectFile"
                  id="projectFile" (change)="onUploadFile($event.target)">
                <label class="custom-file-label" for="projectFile">
                  {{ isUploadedFile ? projectFileName : 'Seleccione un archivo' }}
                </label>
            </div>
          </div>
          <div class="form-group" *ngSwitchCase="3">
            <label class="form-col-form-label" for="projectFile">Portada del Proyecto</label>
            <div *ngIf="isLoadImage" class="form-group form-actions d-flex justify-content-center">
              <img [src]="resource" style="width: 300px; height: 300px;">
            </div>
            <div *ngIf="!isLoadImage" class="cssload-thecube">
              <div class="cssload-cube cssload-c1"></div>
              <div class="cssload-cube cssload-c2"></div>
              <div class="cssload-cube cssload-c4"></div>
              <div class="cssload-cube cssload-c3"></div>
            </div>
          </div>
          <div class="form-group " *ngSwitchDefault>
            <label class="form-col-form-label" for="projectFile">Portada del Proyecto</label>
            <div class="input-group custom-file">
              <input #projectFile class="form-control custom-file-input" type="file" accept=".pdf" formControlName="projectFile"
              id="projectFile" (change)="onUploadFile($event.target)">
              <label class="custom-file-label" for="projectFile">
                {{ isUploadedFile ? projectFileName : 'Seleccione un archivo' }}
              </label>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-6" stlye="padding: 0.375rem 0.75rem">
            <label class="form-col-form-label" for="honorificMention">Mención honorífica</label>
            <div class="input-group">
              <mat-button-toggle-group id="honorificMention" formControlName="honorificMention" 
                [value]="formRequest.get('honorificMention').value">
                <mat-button-toggle value="true">Con mención honorífica</mat-button-toggle>
                <mat-button-toggle value="false">Sin mención honorífica</mat-button-toggle>
              </mat-button-toggle-group>              
            </div>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-sm-6 col-md-6">
          <label class="form-col-form-label" for="numberParticipants">Número de integrantes</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-group"></i></span>
            </div>
            <input type="number" pKeyFilter="pnum" min="1" formControlName="numberParticipants"
              [ngClass]="(!formRequest.get('numberParticipants').valid && formRequest.get('numberParticipants').touched)?'form-control is-invalid':'form-control'"
              id="numberParticipants" placeholder="Número de integrantes">
            <div class="invalid-feedback"
              *ngIf="!formRequest.get('numberParticipants').valid && formRequest.get('numberParticipants').touched">
              <span *ngIf="formRequest.get('numberParticipants').errors['required']">
                Número de integrantes obligatorio
              </span>
              <span *ngIf="formRequest.get('numberParticipants').errors['min']">
                Número de integrantes incorrecto
              </span>
            </div>
          </div>
        </div>
        <div class="form-group col-sm-6 col-md-6">
          <label class="form-col-form-label" for="proposedDate">Día propuesto para titulación</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text"><i class="fa fa-calendar"></i></span>
            </div>
            <input type="date" id="proposedDate" formControlName="proposedDate"
              [ngClass]="(!formRequest.get('proposedDate').valid && formRequest.get('proposedDate').touched)?'form-control is-invalid':'form-control'">
            <div class="invalid-feedback"
              *ngIf="!formRequest.get('proposedDate').valid && formRequest.get('proposedDate').touched">
              <span *ngIf="formRequest.get('proposedDate').errors['required']">
                Día propuesto obligatorio
              </span>
            </div>
          </div>
        </div>
      </div>      
      <div *ngIf="operationMode===3" class="form-group col-sm-14 col-md-14">
        <label class="form-col-form-label" for="observations">Observaciones</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text"><i class="fa fa-pencil"></i></span>
          </div>
          <textarea
            [ngClass]="(!formRequest.get('observations').valid && formRequest.get('observations').touched)?'form-control is-invalid':'form-control'"
            id="observations" formControlName="observations" placeholder="Observaciones"
            oninput="this.value = this.value.toUpperCase()"></textarea>
          <div class="invalid-feedback"
            *ngIf="!formRequest.get('observations').valid && formRequest.get('observations').touched">
            <span *ngIf="formRequest.get('observations').errors['required']">
              Observaciones del proyecto obligatorio
            </span>
          </div>
        </div>
      </div>
    </div>

    <div class="card-footer text-right" [ngSwitch]="operationMode">
      <div *ngSwitchCase="1">
        <button type="submit" class="btn btn-sm btn-success" style="margin-right: 0.3em"><i
            class="fa fa-check-circle-o"></i>Guardar</button>
        <button type="reset" class="btn btn-sm btn-danger"><i class="fa fa-ban"></i> Limpiar </button>
      </div>
      <div *ngSwitchCase="3">
        <button type="button" class="btn btn-sm btn-success" style="margin-right: 0.3em" (click)="accept()"><i
            class="fa fa-check-circle-o"></i>Aceptar</button>
        <button type="button" class="btn btn-sm btn-danger" (click)="reject()"><i
            class="fa fa-ban"></i>Rechazar</button>
      </div>
      <div *ngSwitchDefault>
        <button type="submit" class="btn btn-sm btn-success" [disabled]="formRequest.invalid"
          style="margin-right: 0.3em"><i class="fa fa-dot-circle-o"></i>Aceptar
        </button>
        <button type="reset" class="btn btn-sm btn-danger"><i class="fa fa-ban"></i> Limpiar </button>
      </div>
    </div>
  </form>
</div>